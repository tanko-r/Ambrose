---
phase: 07-polish-validation
plan: 05
type: execute
wave: 3
depends_on: ["07-01", "07-02", "07-03", "07-04"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "All Phase 7 success criteria verified through manual testing"
    - "Dark mode, keyboard shortcuts, compact mode, preferences, filters all work end-to-end"
    - "No critical accessibility violations reported by axe-core"
  artifacts: []
  key_links: []
---

<objective>
Verify all Phase 7 deliverables work end-to-end through a comprehensive manual test pass covering dark mode, keyboard shortcuts, command palette, preferences persistence, compact mode, bottom bar filters, accessibility, and small screen warning.

Purpose: Phase 7 is a polish phase -- visual quality and UX consistency are the primary deliverables. Automated builds confirm compilation, but the user experience can only be validated by exercising the app interactively.
Output: Confirmation that all 9 success criteria are met, or a list of issues requiring gap closure.
</objective>

<execution_context>
@C:/Users/david/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/david/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/07-polish-validation/07-01-SUMMARY.md
@.planning/phases/07-polish-validation/07-02-SUMMARY.md
@.planning/phases/07-polish-validation/07-03-SUMMARY.md
@.planning/phases/07-polish-validation/07-04-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Verify all Phase 7 deliverables end-to-end</name>
  <what-built>
    Complete Phase 7 Polish + Validation deliverables:
    1. Dark/light/system theme toggle with proper document viewer dark mode
    2. Settings dialog with 4-5 preference controls persisted in localStorage
    3. Command palette (Cmd/Ctrl+K) with fuzzy search and all app actions
    4. 11+ keyboard shortcuts (J/K navigate, [/] toggle panels, F flag, G generate, ? help)
    5. Keyboard shortcuts help dialog (? key)
    6. Loading states with delayed skeletons, error boundary, empty state guidance
    7. Bottom bar filter toggles (risks, revisions, flags)
    8. Compact mode (reduced card spacing)
    9. Small screen warning for viewports below 1280px
    10. Accessibility: ARIA labels, keyboard navigation, focus indicators, axe-core auditing
  </what-built>
  <how-to-verify>
    Start the app: `cd frontend && npm run dev` (and ensure Flask backend is running on :5000)

    **1. Dark Mode (SC #2)**
    - Click theme toggle in header → cycles through light/dark/system
    - In dark mode: verify document text is readable, sidebar cards have dark backgrounds, borders visible
    - Refresh page → theme persists (check localStorage for 'theme' key)

    **2. Keyboard Shortcuts (SC #1)**
    - Press `?` → keyboard help dialog opens showing all shortcuts
    - Press `Cmd/Ctrl+K` → command palette opens with fuzzy search
    - Type "flag" → Flag Current Clause appears in results
    - Press `[` → navigator panel toggles
    - Press `]` → sidebar toggles
    - Load a document with risks, press `J`/`K` → navigates between risk paragraphs
    - Click into revision editor text field, press `J` → should NOT navigate (form field protection)
    - Press `Escape` → closes open panels/dialogs

    **3. Compact Mode (SC #3)**
    - Open Settings (Cmd/Ctrl+, or menu) → toggle compact mode
    - Sidebar cards should have noticeably less padding
    - Bottom bar should be slightly shorter
    - No font size or icon changes

    **4. Preferences Persistence (SC #4)**
    - Open Settings → change default sidebar tab to "Flags"
    - Toggle compact mode on
    - Refresh page → both settings should persist
    - Open DevTools → Application → localStorage → verify 'ambrose-preferences' key exists

    **5. Bottom Bar Filters (SC #5)**
    - Load a document with risks, revisions, and flags
    - Click "Risks" pill → risk paragraphs filtered out of navigator
    - Click "Flags" pill → flagged paragraphs filtered out
    - Click "Revisions" pill → revised paragraphs filtered out
    - All three off → shows all paragraphs (safety fallback)

    **6. Loading/Error/Empty States (SC #6)**
    - Before loading document: sidebar shows empty state guidance text
    - Start analysis: progress bar shows percentage and status updates
    - Select paragraph with no risks: shows "No risks" message
    - (Error state: hard to trigger manually -- verify error-boundary.tsx exists)

    **7. Small Screen Warning (SC #7 -- replaces responsive design)**
    - Resize browser window below 1280px → warning overlay appears
    - Click dismiss → warning goes away for current session
    - App still visible/usable behind overlay

    **8. Accessibility (SC #8)**
    - Open Chrome DevTools console → check for axe-core violation reports
    - Tab through document → each paragraph gets visible focus ring
    - Tab through sidebar → controls are keyboard-accessible
    - Check ARIA labels in Elements panel → buttons/toggles should have aria-labels

    **9. Visual Parity (SC #9)**
    - Compare light mode appearance to the original Flask app
    - Fonts, colors, spacing should match the existing design
    - No visual regressions from Phase 7 changes
  </how-to-verify>
  <action>Human verification checkpoint -- no automated action. Review all deliverables listed in what-built and follow the how-to-verify steps.</action>
  <verify>User confirms "approved" or provides list of issues</verify>
  <done>All 9 Phase 7 success criteria confirmed working by user</done>
  <resume-signal>Type "approved" if all criteria pass, or describe specific issues that need fixing</resume-signal>
</task>

</tasks>

<verification>
All 9 Phase 7 success criteria verified through interactive testing.
</verification>

<success_criteria>
- User confirms all 9 success criteria pass
- No critical accessibility violations
- No visual regressions from Phase 7 changes
</success_criteria>

<output>
After completion, create `.planning/phases/07-polish-validation/07-05-SUMMARY.md`
</output>
