---
phase: 08-cleanup-cutover
plan: 02
type: execute
wave: 2
depends_on: ["08-01"]
files_modified:
  - README.md
  - app/README.md
  - .planning/codebase/ARCHITECTURE.md
  - .planning/codebase/STRUCTURE.md
autonomous: true

must_haves:
  truths:
    - "README.md describes the Next.js + Flask API architecture, not the old vanilla JS frontend"
    - "app/README.md describes the Flask API backend only, no frontend references"
    - "Architecture and structure docs point to frontend/ for presentation layer, not app/static/"
    - "No active documentation directs users to open localhost:5000 in a browser"
  artifacts:
    - path: "README.md"
      provides: "Updated project documentation"
      contains: "Next.js"
    - path: "app/README.md"
      provides: "Backend-specific documentation"
      contains: "API"
    - path: ".planning/codebase/ARCHITECTURE.md"
      provides: "Updated architecture description"
      contains: "frontend/"
    - path: ".planning/codebase/STRUCTURE.md"
      provides: "Updated directory structure"
      contains: "_archived/static/"
  key_links:
    - from: "README.md"
      to: "package.json"
      via: "npm run dev instructions"
      pattern: "npm run dev"
---

<objective>
Update all documentation to reflect the Next.js-only frontend and API-only Flask backend. Sweep stale references to the old vanilla JS frontend.

Purpose: After Plan 01 archives the old frontend and strips Flask, documentation must accurately describe the new architecture. Stale references confuse future development sessions.

Output: All docs reflect the current Next.js + Flask API architecture.
</objective>

<execution_context>
@C:/Users/david/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/david/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/08-cleanup-cutover/08-RESEARCH.md
@.planning/phases/08-cleanup-cutover/08-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update README.md and app/README.md</name>
  <files>
    README.md
    app/README.md
  </files>
  <action>
    **Step 1: Read current README.md and app/README.md**

    Read both files in full to understand their current content.

    **Step 2: Update README.md**

    Rewrite to reflect the current architecture. The README should include:

    1. **Title and description**: "Ambrose -- Contract Redlining Tool" with a one-paragraph description of the AI-powered collaborative contract review workflow.

    2. **Tech Stack** section:
       - Backend: Flask (Python) -- REST API for document parsing, analysis, revision generation
       - Frontend: Next.js 16 + Tailwind v4 + shadcn/ui -- React-based UI
       - AI: Claude Opus (document analysis), Gemini Flash (revision generation)
       - State: Zustand (frontend), file-based sessions (backend)

    3. **Quick Start** section:
       ```
       # Prerequisites: Python 3.10+, Node.js 20+

       # Install Python dependencies
       pip install -r requirements.txt

       # Install Node dependencies
       cd frontend && npm install && cd ..
       npm install  # root dev tooling (concurrently)

       # Set API keys
       export ANTHROPIC_API_KEY=your-key
       export GEMINI_API_KEY=your-key
       # Or create anthropic_api.txt / api.txt files

       # Start development (both servers)
       npm run dev

       # Or start individually
       npm run dev:flask   # API at http://localhost:5000
       npm run dev:next    # Frontend at http://localhost:3000
       ```

    4. **Project Structure** section (simplified tree):
       ```
       claude-redlining/
       ├── app/                    # Flask API backend
       │   ├── server.py           # App factory (API-only)
       │   ├── api/routes.py       # REST endpoints
       │   ├── services/           # Business logic (Claude, Gemini, document parsing)
       │   ├── models/             # Concept map, risk map
       │   └── data/               # Runtime sessions + uploads (gitignored)
       ├── frontend/               # Next.js frontend
       │   ├── src/app/            # Pages (App Router)
       │   ├── src/components/     # React components
       │   ├── src/hooks/          # Custom hooks
       │   └── src/lib/            # Types, API client, store
       ├── _archived/              # Retired vanilla JS frontend (reference only)
       ├── package.json            # Dev orchestrator (concurrently)
       ├── run.py                  # Backend quick start
       └── requirements.txt        # Python dependencies
       ```

    5. **Development** section: Explain the `npm run dev` workflow, that Flask runs on :5000, Next.js on :3000, and Next.js proxies /api/* to Flask.

    Remove any "Migration from Vanilla JS" sections, "Currently migrating" language, or references to `app/static/` as the frontend. Keep the README concise and current.

    **Step 3: Update app/README.md**

    Rewrite as a backend-focused README:

    1. Title: "Contract Review API Backend"
    2. Description: Flask REST API providing document parsing, AI analysis, revision generation, and finalization endpoints.
    3. Brief list of key modules: `api/routes.py`, `services/`, `models/`
    4. Note that the frontend is in `../frontend/` (Next.js)
    5. Remove all references to `app/static/`, "vanilla JS", or "open http://localhost:5000 in browser"
  </action>
  <verify>
    1. `grep -c "app/static" README.md` returns 0
    2. `grep -c "vanilla" README.md` returns 0 (case-insensitive check too)
    3. `grep -c "npm run dev" README.md` returns at least 1
    4. `grep -c "Next.js" README.md` returns at least 1
    5. `grep -c "localhost:5000" app/README.md` returns 0 (as a browser instruction)
    6. `grep -c "static" app/README.md` returns 0 (no references to old frontend)
  </verify>
  <done>
    README.md describes the Next.js + Flask API architecture with correct setup instructions. app/README.md is a concise backend-only README with no frontend references.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update architecture and structure docs, sweep stale references</name>
  <files>
    .planning/codebase/ARCHITECTURE.md
    .planning/codebase/STRUCTURE.md
  </files>
  <action>
    **Step 1: Update .planning/codebase/ARCHITECTURE.md**

    Read the file and make these targeted changes:

    1. Update **Presentation Layer** section:
       - Change Location from `app/static/` to `frontend/` (the Next.js app)
       - Change Contains from "Single-page application (index.html, analysis.js, main.css)" to "Next.js 16 App Router with React components, Zustand store, shadcn/ui"
       - Keep the Purpose and Depends on/Used by largely the same

    2. Update **Entry Point** section:
       - Remove mention of "serves static files" from the server.py description
       - Change to: "Creates Flask app, registers API blueprint, configures upload/session folders"

    3. Update the **Overall** pattern description:
       - Change "HTML/JS frontend" to "Next.js React frontend"

    4. Leave everything else (Service Layer, Model Layer, Data Storage Layer, Data Flow, State Management, Error Handling) unchanged -- those are still accurate.

    **Step 2: Update .planning/codebase/STRUCTURE.md**

    Read the file and make these targeted changes:

    1. In the **Directory Layout** tree:
       - Remove the `app/static/` subtree
       - Add `_archived/` with a note: "Retired vanilla JS frontend (reference only)"
       - Add `frontend/` with brief subtree: `src/app/`, `src/components/`, `src/hooks/`, `src/lib/`
       - Add `package.json` at root level with note: "Dev orchestrator (concurrently)"

    2. Update the `app/static/` **Directory Purpose** section:
       - Replace with `_archived/static/` section explaining it's the retired frontend kept for reference
       - Add a `frontend/` section describing the Next.js app

    3. In **Key File Locations > Frontend** section:
       - Change from `app/static/index.html` and `app/static/css/main.css` references to `frontend/src/app/` and `frontend/src/components/`

    4. In **Where to Add New Code > New Feature** section:
       - Change frontend instructions from "Add UI to app/static/index.html" to "Add React components in frontend/src/components/"

    5. In **Entry Points** section:
       - Update `app/server.py` description to remove "static file serving"

    **Step 3: Quick sweep for any remaining stale references**

    Run a grep for `app/static` across all `.md` files in `.planning/codebase/`:
    ```bash
    grep -r "app/static" .planning/codebase/ --include="*.md"
    ```

    Fix any remaining references found (update to `_archived/static/` or `frontend/` as appropriate). Note: CONCERNS.md may reference `app/static/js/sidebar.js` etc -- if these are clearly labeled as historical concerns, leave them. If they read as current guidance, annotate with "(archived -- now in frontend/)".
  </action>
  <verify>
    1. `grep "app/static/" .planning/codebase/ARCHITECTURE.md` returns no matches
    2. `grep "frontend/" .planning/codebase/ARCHITECTURE.md` returns at least 1 match
    3. `grep "_archived/" .planning/codebase/STRUCTURE.md` returns at least 1 match
    4. `grep "frontend/" .planning/codebase/STRUCTURE.md` returns at least 1 match
    5. No `.planning/codebase/*.md` file references `app/static/` as a current directory (historical annotations OK)
  </verify>
  <done>
    Architecture and structure docs reflect Next.js frontend and _archived/ location. All active docs point to frontend/ for presentation layer. Stale references in .planning/codebase/ are fixed or annotated.
  </done>
</task>

</tasks>

<verification>
1. `grep -r "app/static" README.md app/README.md .planning/codebase/ARCHITECTURE.md .planning/codebase/STRUCTURE.md` returns no matches for active (non-historical) references
2. README.md contains `npm run dev` instructions and Next.js references
3. app/README.md is backend-focused with no frontend serving instructions
4. Architecture doc points to `frontend/` for presentation layer
5. Structure doc includes `_archived/static/` and `frontend/` in directory tree
</verification>

<success_criteria>
- README.md accurately describes the Next.js + Flask API architecture
- app/README.md is a concise backend-only reference
- .planning/codebase/ARCHITECTURE.md presentation layer points to frontend/
- .planning/codebase/STRUCTURE.md includes _archived/ and frontend/ in directory layout
- No documentation directs users to open localhost:5000 in a browser for the UI
</success_criteria>

<output>
After completion, create `.planning/phases/08-cleanup-cutover/08-02-SUMMARY.md`
</output>
